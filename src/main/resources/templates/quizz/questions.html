<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Review Quizz Questions</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/output.css" rel="stylesheet">
</head>
<body class="min-h-screen bg-base-200">
    <div class="navbar bg-primary text-primary-content">
        <div class="flex-1">
            <a th:href="@{/}" class="btn btn-ghost normal-case text-xl">Cool Project</a>
        </div>
        <div class="flex-none">
            <ul class="menu menu-horizontal px-1">
                <li sec:authorize="hasAuthority('PROFESSOR')">
                    <a th:href="@{/quizz/my-quizzes}">My Quizzes</a>
                </li>
                <li>
                    <a th:href="@{/logout}">Logout</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6">Review Generated Questions</h1>
        
        <div class="mb-8 p-4 bg-base-100 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-2">Quizz Description</h2>
            <p th:text="${description}" class="italic text-gray-600"></p>
            
            <form th:action="@{/quizz/regenerate}" method="post" class="mt-4">
                <div class="form-control">
                    <label class="label" for="description">
                        <span class="label-text">Edit Description to Regenerate Questions</span>
                    </label>
                    <textarea id="description" name="description" 
                        class="textarea textarea-bordered h-16" 
                        th:text="${description}"></textarea>
                </div>
                <div class="form-control mt-2">
                    <button type="submit" class="btn btn-outline btn-secondary">Regenerate Questions</button>
                </div>
            </form>
        </div>
        
        <form th:action="@{/quizz/create-quizz}" method="post" class="space-y-8">
            <div th:each="question, status : ${questions}" class="card bg-base-100 shadow-xl mb-6">
                <div class="card-body">
                    <h2 class="card-title">Question #<span th:text="${status.count}"></span></h2>
                    
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">Question</span>
                        </label>
                        <textarea 
                            th:name="|questions[${status.index}].questionText|" 
                            class="textarea textarea-bordered h-24" 
                            th:text="${question.questionText}"></textarea>
                    </div>
                    
                    <div class="form-control mt-4">
                        <label class="label">
                            <span class="label-text">Model Answer</span>
                        </label>
                        <textarea 
                            th:name="|questions[${status.index}].modelAnswer|" 
                            class="textarea textarea-bordered h-32" 
                            th:text="${question.modelAnswer}"></textarea>
                    </div>
                    
                    <!-- Hidden field for orderIndex -->
                    <input type="hidden" 
                           th:name="|questions[${status.index}].orderIndex|" 
                           th:value="${status.index}">
                </div>
            </div>
            
            <div class="card bg-base-100 shadow-xl p-6">
                <div class="card-actions justify-end">
                    <button type="submit" class="btn btn-primary">Approve Questions & Continue</button>
                </div>
            </div>
        </form>
    </div>
</body>
</html> 